const CslXL={isMuted:!1,msg:null,trId:null,btMTr:["You have no chance to turn","Você não tem nenhuma chance de girar","你没有机会转身"],rS:[],pzs:["0","1","3","5","8","10","100","300","300","300","500","500","500","3000","3000","3000","6000","6000","6000","iPhone 14","iPhone 14","iPhone 14"],sPn:function(){let e=new XMLHttpRequest,t=$("meta[name=csrf-token]").attr("content");e.open("GET","/api/freespin/spin"),e.setRequestHeader("Content-Type","appication/json"),e.setRequestHeader("X-CSRF-TOKEN",t),e.setRequestHeader("Authorization","Bearer "+t),e.onload=(()=>{if(e.status>=200&&e.status<300){const t=JSON.parse(e.responseText);CslXL.trId=t.trId,t.available?0==wheelSpinning&&(theWheel.animation.spins=10,theWheel.sAn(t.prb),wheelSpinning=!0):CslXL.gRs(0)}else console.log(new Error(e.statusText))}),e.send()},aPz:function(e){if(null!=CslXL.trId){let t=new XMLHttpRequest,n=$("meta[name=csrf-token]").attr("content");t.open("POST","/api/freespin/win"),t.setRequestHeader("Content-Type","appication/json"),t.setRequestHeader("X-CSRF-TOKEN",n),t.setRequestHeader("Authorization","Bearer "+n),t.onload=(()=>{if(t.status>=200&&t.status<300){CslXL.bSrv();const n=JSON.parse(t.responseText);for(let e=0;e<32;e++)$("#confetti__wheel__win").append('<div class="confetti-piece"></div>');0!=e.text?($("#confetti__wheel__win").fadeIn(200),$("#free_spin_win").text(e.text),$(".dsdsdsds").toggleClass("md-show",!1),$(".md-result-wheel-bonus").addClass("md-show"),CslXL.rtW(),$("#money").html(n.bal),$("#money").attr("data-current-balance",n.bal),setTimeout(()=>{$("#confetti__wheel__win").fadeOut(200),$("#confetti__wheel__win").html(""),$(".md-result-wheel-bonus").removeClass("md-show")},4e3)):($(".dsdsdsds").toggleClass("md-show",!1),$(".md-result-wheel-lose").addClass("md-show"),CslXL.rtW())}else console.log(new Error(t.statusText))}),t.send(JSON.stringify({win:parseInt(e.text),trId:CslXL.trId,code:e.code}))}},hDGn:function(){$("#confetti__wheel__win").fadeOut(200),$("#confetti__wheel__win").html(""),$(".md-result-wheel-bonus").removeClass("md-show")},sCF:function(){var e=document.getElementById("wheelNewInformationFaq");e.classList.contains("wheel__new__informations__card--visible")?e.classList.remove("wheel__new__informations__card--visible"):e.classList.add("wheel__new__informations__card--visible")},sCJ:function(){var e=document.getElementById("wheelNewInformationJackpot");e.classList.contains("wheel__new__informations__card--visible")?e.classList.remove("wheel__new__informations__card--visible"):e.classList.add("wheel__new__informations__card--visible")},sT:function(e,t){$(".tab-wheel-bonus").removeClass("activer"),$(".freespin_tab_"+t).addClass("activer");const n=document.getElementsByClassName("content-wheel-bonus");for(let e=0;e<n.length;e++)n[e].classList.remove("active");const s=document.getElementById(e);s&&s.classList.add("active")},rtW:function(){theWheel.stAn(!1),theWheel.rotationAngle=theWheel.animation.propertyValue-3600,document.getElementById("spin_button").className="wheel__btn",wheelSpinning=!1},pSd:function(){!CslXL.isMuted&&(audio.pause(),audio.currentTime=0,audio.play())},gRs:function(e){0==e&&("en"==$("#frm_brand").val()?CslXL.msg=CslXL.btMTr[0]:"pt"==$("#frm_brand").val()?CslXL.msg=CslXL.btMTr[1]:CslXL.msg=CslXL.btMTr[2],CslXL.SwRs())},SwRs:function(){return iziToast.info({message:CslXL.msg,icon:"fa fa-info"})},mkRdI:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},gDi:function(e){$(".wheel__new__historic__value").html(""),e.forEach(e=>{let t=e.win;const n=document.querySelector(".wheel__new__historic__value"),s=document.createElement("div");s.classList.add("wheel__new__historic__item");const i=document.createElement("img");0==t?(t="29bet",s.classList.add("big-prize"),i.setAttribute("src","https://cdn.29bet.com/assets/img/all/pages/layout/favicon.png")):"iPhone 14"==t?(t="iPhone14",s.classList.add("jackpot"),i.setAttribute("src","https://cdn.29bet.com/assets/img/apple.png")):(s.classList.add("prize"),i.setAttribute("src","https://cdn.29bet.com/assets/img/all/components/wheel-bonus/money-ico.png"));const o=document.createElement("p"),a=document.createTextNode(t);o.appendChild(a),s.appendChild(o),s.appendChild(i),n.append(s)})},bSrv:function(){var e=document.querySelector(".md-result-wheel-bonus");new MutationObserver(function(t){e.classList.contains("md-show")||($("#confetti__wheel__win").fadeOut(200),$("#confetti__wheel__win").html(""))}).observe(e,{attributes:!0,attributeFilter:["class"],childList:!1,characterData:!1})}};let bg=new Image;bg.src=freespin.rouletteBG;let backgroundOpacity=1,theWheel=new Winwheel({outerRadius:216,innerRadius:75,textFontSize:24,textOrientation:"horizontal",textAlignment:"outer",numSegments:freespin.segments.length,textLineWidth:3,lineWidth:8,textFillStyle:"#fff0",rotationAngle:0,segments:freespin.segments,animation:{type:"spinToStop",duration:10,spins:3,callbackFinished:CslXL.aPz,callbackSound:CslXL.pSd,soundTrigger:"pin"},pins:{number:freespin.segments.length,fillStyle:"none",outerRadius:0}});bg.onload=function(){theWheel.draw=function(){null!==theWheel.ctx&&(theWheel.ctx.clearRect(0,0,theWheel.canvas.width,theWheel.canvas.height),function(){let e=theWheel.ctx;e.save();let t=theWheel.canvas.width/2,n=theWheel.canvas.height/2,s=theWheel.rotationAngle%360*Math.PI/180;e.save(),e.globalAlpha=backgroundOpacity,e.translate(t,n),e.rotate(s);let i=1.1*bg.width,o=1.1*bg.height,a=-i/2,l=-o/2;e.drawImage(bg,a,l,i,o),e.restore()}())},theWheel.draw()};let audio=new Audio("/sound/tick.mp3"),wheelPower=0,wheelSpinning=!1,sono=!0;$(".wheel__new--sound").click(function(){sono?(sono=!1,CslXL.isMuted=!0,$(this).find("img").attr("src","https://cdn.29bet.com/assets/img/all/components/wheel-bonus/sound-off.png")):(sono=!0,CslXL.isMuted=!1,$(this).find("img").attr("src","https://cdn.29bet.com/assets/img/all/components/wheel-bonus/sound-on.png"))});
